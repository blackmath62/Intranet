{% extends 'base.html.twig' %}
{% block title %}
	{{ title }}
{% endblock %}
{% block body %}
	{% if is_granted('ROLE_ADMIN') %}
<div class="">
	<div class="d-flex flex-column">
		<div class="col-lg-3 col-6">
			<!-- small card -->
			<div class="small-box bg-info">
				<div class="inner">
					<h3>150</h3>

					<p>New Orders</p>
				</div>
				<div class="icon">
					<i class="fas fa-shopping-cart"></i>
				</div>
				<a href="#" class="small-box-footer">
					More info
					<i class="fas fa-arrow-circle-right"></i>
				</a>
			</div>
		</div>
		<div class="col-md-3 col-sm-6 col-12">
			<div class="info-box bg-info">
				<span class="info-box-icon">
					<i class="far fa-bookmark"></i>
				</span>

				<div class="info-box-content">
					<span class="info-box-text">Bookmarks</span>
					<span class="info-box-number">41,410</span>

					<div class="progress">
						<div class="progress-bar" style="width: 70%"></div>
					</div>
					<span class="progress-description">
						70% Increase in 30 Days
					</span>
				</div>
				<!-- /.info-box-content -->
			</div>
			<!-- /.info-box -->
		</div>
	</div>
	<div class="d-flex flex-column">
		<div class="col-lg-3 col-6">
			<!-- small card -->
			<div class="small-box bg-warning">
				<div class="inner">
					<h3>44</h3>

					<p>User Registrations</p>
				</div>
				<div class="icon">
					<i class="fas fa-user-plus"></i>
				</div>
				<a href="#" class="small-box-footer">
					More info
					<i class="fas fa-arrow-circle-right"></i>
				</a>
			</div>
		</div>
		<div class="col-md-3 col-sm-6 col-12">
			<div class="info-box bg-warning">
				<span class="info-box-icon">
					<i class="far fa-calendar-alt"></i>
				</span>

				<div class="info-box-content">
					<span class="info-box-text">Events</span>
					<span class="info-box-number">41,410</span>

					<div class="progress">
						<div class="progress-bar" style="width: 70%"></div>
					</div>
					<span class="progress-description">
						70% Increase in 30 Days
					</span>
				</div>
				<!-- /.info-box-content -->
			</div>
			<!-- /.info-box -->
		</div>
	</div>
</div>

		<!-- START ACCORDION & CAROUSEL-->
		<h5 class="mt-4 mb-2">Actualités</h5>
		<!-- /.col -->

		{% if CmdsToday|length > 0 %}

			<div class="d-flex flex-wrap">
				<div class="d-flex">
					<div class="col-md-4">
						<p class="text-center">
							<strong>Commandes Lhermitte</strong>
						</p>

						<div class="progress-group">
							Commandes 2019
							<span class="float-right">
								<b>{{  CmdsLastYear|length }}</b>/{{  CmdsLastYear|length }}</span>
							<div class="progress progress-sm">
								<div class="progress-bar bg-info" style="width: 100%"></div>
							</div>
						</div>
						<!-- /.progress-group -->

						<div class="progress-group">
							Commandes 2020
							<span class="float-right">
								<b>{{ CmdsToday|length }}</b>/{{  CmdsLastYear|length }}</span>
							<div class="progress progress-sm">
								<div class="progress-bar bg-success" style="width: {{  (CmdsLastYear|length / CmdsToday|length) - 1 }}%"></div>
							</div>
						</div>
						<!-- /.progress-group -->
					</div>
					<div class="col-md-4">
						<p class="text-center">
							<strong>Bon de livraison Lhermitte</strong>
						</p>
						<div class="progress-group">
							Bon de livraison 2019
							<span class="float-right">
								<b>100</b>/100</span>
							<div class="progress progress-sm">
								<div class="progress-bar bg-info" style="width: 100%"></div>
							</div>
						</div>


						<div class="progress-group">
							Bon de livraison 2020
							<span class="float-right">
								<b>90</b>/100</span>
							<div class="progress progress-sm">
								<div class="progress-bar bg-success" style="width: 90%"></div>
							</div>
						</div>
						<!-- /.progress-group -->
					</div>

					<!-- /.col -->
					<div class="col-md-6">
						<div
							class="">
							<!-- /.card-header -->
							<div class="card-body">
								<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
									<ol class="carousel-indicators">
										<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
										<li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
										<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
									</ol>
									<div class="carousel-inner">
										<div class="carousel-item active">
											<img class="d-block w-100" src="https://placehold.it/900x500/39CCCC/ffffff&text=I+Love+Bootstrap" alt="First slide">
										</div>
										<div class="carousel-item">
											<img class="d-block w-100" src="https://placehold.it/900x500/3c8dbc/ffffff&text=I+Love+Bootstrap" alt="Second slide">
										</div>
										<div class="carousel-item">
											<img class="d-block w-100" src="https://placehold.it/900x500/f39c12/ffffff&text=Joyeux+anniversaire+Jérôme" alt="Third slide">
										</div>
									</div>
									<a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
										<span class="carousel-control-prev-icon" aria-hidden="true"></span>
										<span class="sr-only">Previous</span>
									</a>
									<a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
										<span class="carousel-control-next-icon" aria-hidden="true"></span>
										<span class="sr-only">Next</span>
									</a>
								</div>
							</div>
							<!-- /.card-body -->
						</div>
						<!-- /.card -->
					</div>
					<!-- /.col -->
				</div>
				<!-- /.row -->
			{% endif %}


			<!-- END ACCORDION & CAROUSEL-->
			{% set day = "now"|date('w') %}
			{% set weekStart = "now"|date_modify("monday this week")|date('d-m') %}
			{% set weekEnd = "now"|date_modify("sunday this week")|date('d-m') %}
			<p>Cette semaine va du
				{{ weekStart}}
				au
				{{ weekEnd }}</p>
			<!--TODO JEROME Alimenter le carousel avec les anniversaires -->
			{% for user in users %}
				{% if user.bornAt|date('d-m') > weekStart %}
					{% if user.bornAt|date('d-m') < weekEnd %}
						{{ user.pseudo }}
						le
						{{ user.bornAt|date('d-m') }}
					{% endif %}
				{% endif %}
			{% endfor %}
		{% endif %}
	{% endblock %}
