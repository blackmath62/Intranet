{% extends 'base.html.twig' %}

{% block title %}Hello ChatsController!
{% endblock %}

{% block body %}

	<!-- /.card -->
	<div class="row">
		<div
			class="col-md-6">
			<!-- DIRECT CHAT -->
			<div class="card direct-chat direct-chat-warning">
				<div class="card-header">
					<h3 class="card-title">Chat Direct</h3>

					<div class="card-tools">
						<span data-toggle="tooltip" title="3 New Messages" class="badge badge-warning">3</span>
						<button type="button" class="btn btn-tool" data-card-widget="collapse">
							<i class="fas fa-minus"></i>
						</button>
					</div>
				</div>
				<!-- /.card-header -->
				<div
					class="card-body">
					<!-- Conversations are loaded here -->
					<div class="direct-chat-messages">
						<!-- Message. Default to the left -->
						{% for chat in chats %}
                        {% if app.user.id == chat.user.id %}
                        <div class="direct-chat-msg right">
							<div class="direct-chat-infos clearfix">
								<span class="direct-chat-name float-right">{{ chat.user.pseudo }}</span>
								<span class="direct-chat-timestamp float-left">{{ chat.createdAt|date("d/m/Y H:i") }}</span>
							</div>
							<!-- /.direct-chat-infos -->
							<img
							class="direct-chat-img" src="{{ chat.user.img }}" alt="message user image">
							<!-- /.direct-chat-img -->
							<div class="direct-chat-text">
								{{ chat.content }}
							</div>
							<!-- /.direct-chat-text -->
						</div>
						<!-- /.direct-chat-msg -->
                        {% else %}
						<!-- Message to the right -->
                        <div class="direct-chat-msg">
							<div class="direct-chat-infos clearfix">
								<span class="direct-chat-name float-left">{{ chat.user.pseudo }}</span>
								<span class="direct-chat-timestamp float-right">{{ chat.createdAt|date("d/m/Y H:i") }}</span>
							</div>
							<!-- /.direct-chat-infos -->
							<img
							class="direct-chat-img" src="{{ chat.user.img }}" alt="message user image">
							<!-- /.direct-chat-img -->
							<div class="direct-chat-text">
								{{ chat.content }}
							</div>
							<!-- /.direct-chat-text -->
						</div>
						<!-- /.direct-chat-msg -->
						
                        {% endif %}
                        {% endfor %}
					</div>
					<!--/.direct-chat-messages-->

					<!-- /.direct-chat-pane -->
				</div>
				<!-- /.card-body -->
				<div class="card-footer">

					{{ form_start(ChatsForm)}} 
                    
					<div class="input-group">
						{{ form_row(ChatsForm.content, {'attr' : {'type' : "text", 'name' : "message", 'placeholder' : "Votre message ..." ,'class' : "form-group"}})}}
							<span class="input-group-append">
								{{ form_row(ChatsForm.Envoyer, {'attr' : {'class' : "form-group btn btn-warning"}})}}
							</span>
						</div>
						<!-- /.card-footer-->
					</div>
					{{ form_end(ChatsForm)}}
					<!--/.direct-chat -->
				</div>
				<!-- /.card-footer-->
			</div>
			<!--/.direct-chat -->
		</div>
		<!-- /.col -->

		<div
			class="col-md-6">
			<!-- USERS LIST -->
			<div class="card">
				<div class="card-header">
					<h3 class="card-title">Latest Members</h3>

					<div class="card-tools">
						<span class="badge badge-danger">8 New Members</span>
						<button type="button" class="btn btn-tool" data-card-widget="collapse">
							<i class="fas fa-minus"></i>
						</button>
						<button type="button" class="btn btn-tool" data-card-widget="remove">
							<i class="fas fa-times"></i>
						</button>
					</div>
				</div>
				<!-- /.card-header -->
				<div class="card-body p-0">
					<ul class="users-list clearfix">
						<li>
							<img src="dist/img/user1-128x128.jpg" alt="User Image">
							<a class="users-list-name" href="#">Alexander Pierce</a>
							<span class="users-list-date">Today</span>
						</li>
						<li>
							<img src="dist/img/user8-128x128.jpg" alt="User Image">
							<a class="users-list-name" href="#">Norman</a>
							<span class="users-list-date">Yesterday</span>
						</li>
						<li>
							<img src="dist/img/user7-128x128.jpg" alt="User Image">
							<a class="users-list-name" href="#">Jane</a>
							<span class="users-list-date">12 Jan</span>
						</li>
						<li>
							<img src="dist/img/user6-128x128.jpg" alt="User Image">
							<a class="users-list-name" href="#">John</a>
							<span class="users-list-date">12 Jan</span>
						</li>
						<li>
							<img src="dist/img/user2-160x160.jpg" alt="User Image">
							<a class="users-list-name" href="#">Alexander</a>
							<span class="users-list-date">13 Jan</span>
						</li>
						<li>
							<img src="dist/img/user5-128x128.jpg" alt="User Image">
							<a class="users-list-name" href="#">Sarah</a>
							<span class="users-list-date">14 Jan</span>
						</li>
						<li>
							<img src="dist/img/user4-128x128.jpg" alt="User Image">
							<a class="users-list-name" href="#">Nora</a>
							<span class="users-list-date">15 Jan</span>
						</li>
						<li>
							<img src="dist/img/user3-128x128.jpg" alt="User Image">
							<a class="users-list-name" href="#">Nadia</a>
							<span class="users-list-date">15 Jan</span>
						</li>
					</ul>
					<!-- /.users-list -->
				</div>
				<!-- /.card-body -->
				<div class="card-footer text-center">
					<a href="javascript::">View All Users</a>
				</div>
				<!-- /.card-footer -->
			</div>
			<!--/.card -->
		</div>
		<!-- /.col -->
	</div>
	<!-- /.row -->
{% endblock %}
